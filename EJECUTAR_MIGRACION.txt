â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  CÃ“DIGO PARA EJECUTAR LA MIGRACIÃ“N - COPIA Y PEGA EN CONSOLA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Abre la aplicaciÃ³n en el navegador e inicia sesiÃ³n con usuario "eliana"
2. Presiona F12 para abrir las herramientas de desarrollador
3. Ve a la pestaÃ±a "Console"
4. Copia y pega TODO este cÃ³digo:

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

const token = localStorage.getItem('token');
const API_URL = window.location.origin.includes('vercel') 
  ? 'https://compra-maquinaria.vercel.app' 
  : 'http://localhost:3000';

console.log('ğŸ”„ Iniciando migraciÃ³n de MQ a PDTE...');

fetch(`${API_URL}/api/purchases/migrate-mq-to-pdte`, {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': `Bearer ${token}`
  }
})
.then(response => {
  if (!response.ok) {
    return response.json().then(err => Promise.reject(err));
  }
  return response.json();
})
.then(data => {
  console.log('âœ… MigraciÃ³n completada exitosamente!');
  console.log(`ğŸ“Š Total migrado: ${data.migrated?.length || 0} registros`);
  console.log(`ğŸ’¬ Mensaje: ${data.message}`);
  
  if (data.migrated && data.migrated.length > 0) {
    console.log('\nğŸ“‹ Primeros registros migrados:');
    data.migrated.slice(0, 10).forEach((m, i) => {
      console.log(`  ${i + 1}. ${m.old_mq} â†’ ${m.new_mq}`);
    });
    if (data.migrated.length > 10) {
      console.log(`  ... y ${data.migrated.length - 10} mÃ¡s`);
    }
    console.table(data.migrated.slice(0, 10));
  } else {
    console.log('â„¹ï¸ No se encontraron registros con formato MQ-* para migrar');
  }
})
.catch(error => {
  console.error('âŒ Error durante la migraciÃ³n:', error);
  if (error.error) {
    console.error('Detalles:', error.error);
  }
  if (error.details) {
    console.error('Detalles tÃ©cnicos:', error.details);
  }
});

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

5. Presiona Enter
6. Espera a ver el resultado en la consola

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
